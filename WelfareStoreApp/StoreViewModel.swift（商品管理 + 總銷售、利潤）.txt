import Foundation

class StoreViewModel: ObservableObject {
    @Published var products: [Product] = []
    
    @Published var totalSales = 0
    @Published var totalProfit = 0
    
    func addProduct(name: String, cost: Int, price: Int, stock: Int) {
        let product = Product(name: name, cost: cost, price: price, stock: stock)
        products.append(product)
    }
    
    func restock(product: Product, amount: Int) {
        if let index = products.firstIndex(where: {$0.id == product.id}) {
            products[index].stock += amount
        }
    }
    
    func sell(product: Product, amount: Int) {
        if let index = products.firstIndex(where: {$0.id == product.id}) {
            if products[index].stock >= amount {
                products[index].stock -= amount
                totalSales += products[index].price * amount
                totalProfit += products[index].profit * amount
            }
        }
    }
    
    func deleteProduct(at offsets: IndexSet) {
        products.remove(atOffsets: offsets)
    }
}
