import SwiftUI

struct SaleView: View {
    @Environment(\.dismiss) var dismiss
    @ObservedObject var vm: StoreViewModel
    var product: Product
    
    @State private var quantity = ""

    var body: some View {
        VStack(spacing: 20) {
            Text("銷售：\(product.name)").font(.title2)
            Text("庫存：\(product.stock)")
            TextField("銷售數量", text: $quantity)
                .keyboardType(.numberPad)
                .textFieldStyle(.roundedBorder)

            Button("確認銷售") {
                if let qty = Int(quantity) {
                    vm.sell(product: product, amount: qty)
                    dismiss()
                }
            }
            .buttonStyle(.borderedProminent)
        }
        .padding()
    }
}
